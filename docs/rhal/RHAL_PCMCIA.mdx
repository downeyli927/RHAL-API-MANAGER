---
sidebar_position: 46
---

# RHAL_PCMCIA

RHAL_PCMCIA api

## Custom Data Types
### PCMCIA_STS
```bash
typedef enum {
    HAL_PCMCIA_OK     =      0,
    HAL_PCMCIA_FAIL   =     -1,
    HAL_PCMCIA_NODEV  =     -2,
}PCMCIA_STS;
```


## Function Declaration
### RHAL_PCMCIA_Open
```bash
void* RHAL_PCMCIA_Open(UINT8 Id);
```
Open PCMCIA interface
<ParamTable
  items={[
    { name: 'Id', type: 'UINT8', desc: 'Slot Id' },
  ]}
/>
:::danger[Take care]

every fd can be opened once, if more than one clients open the fd, only the one client can get the handle

:::


### RHAL_PCMCIA_Close
```bash
PCMCIA_STS RHAL_PCMCIA_Close(void*pPcmcia);
```
Close PCMCIA interface
<ParamTable
  items={[
    { name: 'pPcmcia', type: 'void*', desc: 'handle of PCMCIA IFD' },
  ]}
/>


### RHAL_PCMCIA_GetCardStatus
```bash
PCMCIA_STS RHAL_PCMCIA_GetCardStatus(void*pPcmcia, UINT32*p_Status);
```
Get Status of PCMCIA interface
<ParamTable
  items={[
    { name: 'pPcmcia', type: 'void*', desc: 'handle of PCMCIA IFD' },
    { name: 'p_Status', type: 'UINT32*', desc: 'PCMCIA Status bit mask' },
  ]}
/>
:::tip[p_Status]

RHAL_PCMCIA_STS_CARD_STATUS_CHANGE : Card Status Changed<br />
RHAL_PCMCIA_STS_IREQ_ASSERT : Resume from STR<br />
RHAL_PCMCIA_STS_CARD_AFTER_STR : Resume from STR<br />
RHAL_PCMCIA_STS_CARD_PRESENT : Card Exists<br />
RHAL_PCMCIA_STS_ACCESS_FAULT

:::


### RHAL_PCMCIA_CheckCardReady
```bash
PCMCIA_STS RHAL_PCMCIA_CheckCardReady(void*pPcmcia);
```
Check PCMCIA Card is ready to use
<ParamTable
  items={[
    { name: 'pPcmcia', type: 'void*', desc: 'handle of PCMCIA IFD' },
  ]}
/>


### RHAL_PCMCIA_CardReset
```bash
PCMCIA_STS RHAL_PCMCIA_CardReset(void*pPcmcia, UINT32 WaitTimeMs);
```
Reset PCMCIA Card 
<ParamTable
  items={[
    { name: 'pPcmcia', type: 'void*', desc: 'handle of PCMCIA IFD' },
    { name: 'WaitTimeMs', type: 'UINT32', desc: 'card reset timeout in ms' },
  ]}
/>


### RHAL_PCMCIA_CardEnable
```bash
PCMCIA_STS RHAL_PCMCIA_CardEnable(void*pPcmcia, UINT8 Enable);
```
Enable PCMCIA Card
<ParamTable
  items={[
    { name: 'pPcmcia', type: 'void*', desc: 'handle of PCMCIA IFD' },
    { name: 'Enable', type: 'UINT8', desc: '0 : disabled, others : Enabled' },
  ]}
/>


### RHAL_PCMCIA_ReadAttrMem
```bash
PCMCIA_STS RHAL_PCMCIA_ReadAttrMem(void*pPcmcia, UINT16 Addr, UINT8*pData, UINT32 Len);
```
Read ATTR memory of PC Card
<ParamTable
  items={[
    { name: 'pPcmcia', type: 'void*', desc: 'handle of PCMCIA IFD' },
    { name: 'Addr', type: 'UINT16', desc: 'start address' },
    { name: 'pData', type: 'UINT8*', desc: 'read data bufffer' },
    { name: 'Len', type: 'UINT32', desc: 'number of bytes to read' },
  ]}
/>


### RHAL_PCMCIA_WriteAttrMem
```bash
PCMCIA_STS RHAL_PCMCIA_WriteAttrMem(void*pPcmcia, UINT16 Addr, UINT8*pData, UINT32 Len);
```
Write ATTR memory of PC Card
<ParamTable
  items={[
    { name: 'pPcmcia', type: 'void*', desc: 'handle of PCMCIA IFD' },
    { name: 'Addr', type: 'UINT16', desc: 'start address' },
    { name: 'pData', type: 'UINT8*', desc: 'data output' },
    { name: 'Len', type: 'UINT32', desc: 'number of bytes to write' },
  ]}
/>


### RHAL_PCMCIA_ReadIOPort
```bash
PCMCIA_STS RHAL_PCMCIA_ReadIOPort(void*pPcmcia, UINT16 Addr, UINT8*pData, UINT32 Len);
```
Read IO memory of PC Card
<ParamTable
  items={[
    { name: 'pPcmcia', type: 'void*', desc: 'handle of PCMCIA IFD' },
    { name: 'Addr', type: 'UINT16', desc: 'port address' },
    { name: 'pData', type: 'UINT8*', desc: 'read data buffer' },
    { name: 'Len', type: 'UINT32', desc: 'number of bytes to reaad' },
  ]}
/>


### RHAL_PCMCIA_WriteIOPort
```bash
PCMCIA_STS RHAL_PCMCIA_WriteIOPort(void*pPcmcia, UINT16 Addr, UINT8*pData, UINT32 Len);
```
Write IO memory of PC Card
<ParamTable
  items={[
    { name: 'pPcmcia', type: 'void*', desc: 'handle of PCMCIA IFD' },
    { name: 'Addr', type: 'UINT16', desc: 'port address' },
    { name: 'pData', type: 'UINT8*', desc: 'data to be written' },
    { name: 'Len', type: 'UINT32', desc: 'number of bytes to be written' },
  ]}
/>


### RHAL_PCMCIA_PollEvent
```bash
PCMCIA_STS RHAL_PCMCIA_PollEvent(void*pPcmcia, UINT32 Mask, UINT32*pEvent);
```
Poll Event
<ParamTable
  items={[
    { name: 'pPcmcia', type: 'void*', desc: 'handle of PCMCIA IFD' },
    { name: 'Mask', type: 'UINT32', desc: 'Event Mask' },
    { name: 'pEvent', type: 'UIN32*', desc: 'Event bit map' },
  ]}
/>
